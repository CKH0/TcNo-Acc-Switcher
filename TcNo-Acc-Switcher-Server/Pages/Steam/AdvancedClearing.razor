@page "/Steam/AdvancedClearing"
@using TcNo_Acc_Switcher_Server.Shared
@using Microsoft.AspNetCore.Http.Extensions
@using TcNo_Acc_Switcher_Server.Pages.General
@namespace TcNo_Acc_Switcher_Server.Pages.Steam
@inject IJSRuntime JsRuntime;
@inject NavigationManager NavManager;

<div class="container settings_cont mainblock">
    <div class="row">
        <div class="col-md-12 col-lg-9 col-xl-8 mx-auto settingsCol restorePage">
            <toastarea />
            <div class="SettingsHeader">
                <hr><span>Important info:</span><hr>
            </div>
            <div>
                <p>
                    Clicking a button will delete the related file(s) from your Steam installation.<br />
                    Deleting loginusers.vdf will result in this account switcher showing no accounts.<br />
                    You will need to login to them using Steam to get them back.
                </p>
            </div>
            <div id="restoreUnderstand">
                <div class="form-check"><input class="form-check-input" type="checkbox" id="Steam_Clearing_Understand"><label class="form-check-label" for="Steam_Clearing_Understand"></label></div><label>I understand what these buttons do.<br></label>
            </div>
            <button class="btn" id="Steam_Close" type="button" @onclick="() => Steam_Close(JsRuntime)"><span>Kill Steam process</span></button>

            <div class="restoreRow">
                <div class="restoreLeft advancedClearingButtonCol">
                    <div class="SettingsHeader">
                        <hr><span>General</span><hr>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_Logs" type="button" @onclick="() => Steam_Clear_Logs(JsRuntime)"><span>..\Steam\Logs</span></button>
                        <button class="btn" id="Steam_Clear_Dumps" type="button" @onclick="() => Steam_Clear_Dumps(JsRuntime)"><span>..\Steam\Dumps</span></button>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_AppCache" type="button" @onclick="() => Steam_Clear_HtmlCache(JsRuntime)"><span>%Local%\Steam\htmlcache</span></button>
                        <button class="btn" id="Steam_Clear_HttpCache" type="button" @onclick="() => Steam_Clear_UiLogs(JsRuntime)"><span>..\Steam\GameOverlay*.log</span></button>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_AppCache" type="button" @onclick="() => Steam_Clear_AppCache(JsRuntime)"><span>..\Steam\appcache</span></button>
                        <button class="btn" id="Steam_Clear_HttpCache" type="button" @onclick="() => Steam_Clear_HttpCache(JsRuntime)"><span>..\Steam\appcache\httpcache</span></button>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_DepotCache" type="button" @onclick="() => Steam_Clear_DepotCache(JsRuntime)"><span>..\Steam\depotcache</span></button>
                    </div>

                    <div class="SettingsHeader">
                        <hr><span>Clean my login history</span><hr>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_Forgotten" type="button" @onclick="() => Steam_Clear_Forgotten(JsRuntime)"><span>Forgotten account backups</span></button>
                        <button class="btn" id="Steam_Clear_Config" type="button" @onclick="() => Steam_Clear_Config(JsRuntime)"><span>..\Steam\config\config.vdf</span></button>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_LoginUsers" type="button" @onclick="() => Steam_Clear_LoginUsers(JsRuntime)"><span>..\Steam\config\loginusers.vdf</span></button>
                        <button class="btn" id="Steam_Clear_Ssfn" type="button" @onclick="() => Steam_Clear_Ssfn(JsRuntime)"><span>..\Steam\ssfn*</span></button>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_AutoLoginUser" type="button" @onclick="() => Steam_Clear_AutoLoginUser(JsRuntime)"><span>HKCU\..\AutoLoginUser</span></button>
                        <button class="btn" id="Steam_Clear_LastGameNameUsed" type="button" @onclick="() => Steam_Clear_LastGameNameUsed(JsRuntime)"><span>HKCU\..\LastGameNameUsed</span></button>
                    </div>
                    <div class="buttoncol">
                        <button class="btn" id="Steam_Clear_PseudoUUID" type="button" @onclick="() => Steam_Clear_PseudoUUID(JsRuntime)"><span>HKCU\..\PseudoUUID</span></button>
                        <button class="btn" id="Steam_Clear_RememberPassword" type="button" @onclick="() => Steam_Clear_RememberPassword(JsRuntime)"><span>HKCU\..\RememberPassword</span></button>
                    </div>
                </div>
                <div class="restoreRight">
                    <div id="lines"></div>
                </div>
            </div>


            <div class="buttoncol col_close">
                <a @onclick='() => GeneralInvocableFuncs.OpenLinkInBrowser("https://github.com/TcNobo/TcNo-Acc-Switcher/wiki/Steam-Cleaning")' class="fancyLink">More Info (Wiki)</a>
                <button class="btn btn_close" type="button" @onclick='() => NavManager.NavigateTo("/Steam/Settings")'><span>Close</span></button>
            </div>
        </div>
    </div>
</div>
<div id="blazor-error-ui">
    <environment include="Staging,Production">
        An error has occurred. This application may no longer respond until reloaded.
    </environment>
    <environment include="Development">
        An unhandled exception has occurred. See browser dev tools for details.
    </environment>
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>
